<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>FOUR - Orbit Navigation</title>
    <!-- vendor -->
    <script src="../../vendor/jquery/dist/jquery.js"></script>
    <script src="../../vendor/mousetrap/mousetrap.js"></script>
    <script src="../../vendor/three.js/three.min.js"></script>
    <script src="../../vendor/tween.js/src/Tween.js"></script>

    <!-- lib -->
    <script src="../../lib/controls/ZoomController.js"></script>
    <script src="../../lib/path/PathPlanner.js"></script>
    <script src="../../lib/Scene.js"></script>
    <script src="../../lib/TargetCamera.js"></script>
    <script src="../../lib/Viewport3D.js"></script>
    <style>
        body {
            margin:0;
            padding:0;
        }
        #webgl {
            bottom: 0;
            left: 0;
            overflow: hidden;
            position: absolute;
            right: 0;
            top: 0;
            z-index: 500;
        }
        #webgl:focus {
            outline: none;
        }
    </style>
</head>
<body>
<div id="webgl"></div>
<script>
    $(document).ready(function () {
        var camera, controller, domElement, geometry, i, light, material, mesh, scene, viewport;

        // scene
        scene = new FOUR.Scene();

        // camera
        camera = new FOUR.TargetCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
        scene.cameras.add(camera);

        // lights
        light = new THREE.DirectionalLight(0xffffff);
        light.position.set(1, 1, 1);
        scene.lights.add(light);

        light = new THREE.DirectionalLight(0x002288);
        light.position.set(-1, -1, -1);
        scene.lights.add(light);

        light = new THREE.AmbientLight(0x222222);
        scene.lights.add(light);

        // viewport
        domElement = document.getElementById('webgl');
        viewport = new FOUR.Viewport3D({camera:camera, continuousUpdate:true, domElement:domElement, scene:scene});

        // controls
        controller = new FOUR.ZoomController({viewport:viewport});
        controller.addEventListener('change', viewport.render.bind(viewport));
        controller.enable();

        // world
        geometry = new THREE.CylinderGeometry(0, 10, 30, 4, 1);
        material =  new THREE.MeshPhongMaterial({ color:0xffffff, shading: THREE.FlatShading });
        for (i = 0; i < 500; i ++) {
            mesh = new THREE.Mesh(geometry, material);
            mesh.position.x = (Math.random() - 0.5) * 1000;
            mesh.position.y = (Math.random() - 0.5) * 1000;
            mesh.position.z = (Math.random() - 0.5) * 1000;
            mesh.updateMatrix();
            mesh.matrixAutoUpdate = false;
            scene.add(mesh);
        }

        viewport.render();
        viewport.update();

    });
</script>
</body>
</html>
